
@{
    ViewBag.Title = "Регистрация";
}


<form style="margin-top:3%;" class="well form-horizontal" action=" " method="post" id="contact_form">
    <fieldset>

        <!-- Form Name -->
        <legend><center><h2><b>Регистрация</b></h2></center></legend><br>

        <!-- Name -->
        <div class="form-group">
            <label class="col-md-4 control-label">Имя</label>
            <div class="col-md-4 inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                    <input id="name" name="user_name" placeholder="Имя" class="form-control" type="text">
                </div>
            </div>
        </div>

        <!-- E-Mail-->
        <div class="form-group">
            <label class="col-md-4 control-label">E-Mail</label>
            <div class="col-md-4 inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                    <input name="email" placeholder="E-Mail" class="form-control" type="email" id="email">
                </div>
            </div>
        </div>

        <!-- password -->
        <div class="form-group">
            <label class="col-md-4 control-label">Пароль</label>
            <div class="col-md-4 inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                    <input name="user_password" placeholder="Пароль" class="form-control" type="password" id="password">
                </div>
            </div>
        </div>

        <!-- Confirm Password-->
        <div class="form-group">
            <label class="col-md-4 control-label">Подтвердите пароль</label>
            <div class="col-md-4 inputGroupContainer">
                <div class="input-group">
                    <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                    <input name="confirm_password" placeholder="Подтвердите пароль" class="form-control" type="password" id="confirmpassword">
                </div>
            </div>
        </div>



        <!-- Select Basic -->
        <!-- Success message -->
        <div class="alert alert-success" style="display:none" role="alert" id="success_message">Успешно!.<i class="glyphicon glyphicon-thumbs-up"></i></div>

        <!-- Send -->
        <div class="form-group">
            <label class="col-md-4 control-label"></label>
            <div class="col-md-4">
                <br>
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<button type="submit" id="submit" class="btn btn-info">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspЗарегистрироваться <span class="glyphicon glyphicon-send"></span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</button>
            </div>
        </div>

        <legend></legend>
        <center><h4><b>Если Вы уже зарегистрированы:</b></h4></center>
        <!-- Login -->
        <div class="form-group">
            <label class="col-md-4 control-label"></label>
            <div class="col-md-4" style="text-align:center">
                <a href="@Url.Action("Index","Home")" class="btn btn-primary">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspЗайти <span class="glyphicon glyphicon-forward"></span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</a>
            </div>
        </div>


    </fieldset>
</form>


@section scripts{
    <script type="text/javascript">
            $(function () {
                $('#submit').click(function (e) {
                    e.preventDefault();
                    var data = {
                        Name: $('#name').val(),
                        Email: $('#email').val(),
                        Password: $('#password').val(),
                        ConfirmPassword: $('#confirmpassword').val()
                    };

                    $.ajax({
                        url: '/api/Account/Register',
                        type: 'POST',
                        contentType: 'application/json; charset=utf-8',
                        data: JSON.stringify(data),
                        success: function (data) {
                            $('#success_message').css('display', 'block');

                        },
                        fail: function (data) {
                            alert("В процесе регистрации возникла ошибка");
                        }
                    });
                });
            });
    </script>
}

